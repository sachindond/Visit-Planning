<!-- Lightning component show visit on map -->
<aura:component controller="ShowVisitOnMapController" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" access="global" >
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <aura:attribute name="mapMarkers" type="Object"/>
    <aura:attribute name="VisitPlanningRecords" type="List" />
    <aura:attribute name="center" type="Object" />
    <aura:attribute name="zoomLevel" type="Integer" default="15"/>
    <aura:attribute name="markersTitle" type="String" />
    <aura:attribute name="showFooter" type="Boolean" />
    <aura:attribute name="selectedDate" type="Date" default=""/>
    <aura:attribute name="subordinateList" type="List" />
    <div class="slds-page-header" role="banner">
        <div class="slds-media">
            <div class="slds-media__figure">
                <lightning:icon size="small" iconName="standard:location" alternativeText="Visit Map" />
            </div>
            <div class="slds-media__body">
                <p class="slds-page-header__title slds-truncate slds-align-middle" title="">View MAP</p>
                <p class="slds-text-body--small slds-page-header__info">At a glance view of Visits</p>
            </div>
        </div>
    </div>
    <lightning:input type="date" aura:id="idVisitDateOnMap" dateStyle="short" value="{!v.selectedDate}" 
                     name="date" label="Select Date" 
                     required="true" format="DD-MM-YYYY" onchange="{!c.onChangeDateFilterOfMap}"/>
    <ui:inputSelect aura:id="idSubordinate" label="Select Subordinate" change="{!c.onChangeSubordinateList}">
        <aura:iteration items="{!v.subordinateList}" var="sb">
            <ui:inputSelectOption text="{!sb.value}" label="{!sb.label}"/>
        </aura:iteration>
    </ui:inputSelect>
    <aura:if isTrue="{!v.mapMarkers.length > 0}" >
        <lightning:map
                       mapMarkers="{!v.mapMarkers }"
                       zoomLevel="{!v.zoomLevel }"
                       >
        </lightning:map>
        <aura:set attribute="else">
            <p style="color:red; text-align:center; margin-top:20px;">There are no visits planned for selected date.</p>
        </aura:set>
    </aura:if>
    
</aura:component>